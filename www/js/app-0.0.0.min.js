angular.module("dgmSurvey",["ionic","d3","loading","dgmSurvey.controllers","dgmSurvey.services"]).run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html"}).state("tab.adminLogin",{url:"/adminLogin",views:{"tab-admin":{templateUrl:"templates/tab-admin-login.html",controller:"loginCtrl"}}}).state("tab.adminDashboard",{url:"/adminDash",views:{"tab-admin":{templateUrl:"templates/admin-dashboard.html",controller:"adminDashCtrl"}}}).state("tab.adminReports",{url:"/adminReports",views:{"tab-admin":{templateUrl:"templates/admin-reports.html",controller:"adminReportsCtrl"}}}).state("tab.adminViewQuestion",{url:"/adminViewQuestion",views:{"tab-admin":{templateUrl:"templates/admin-view-question.html",controller:"QuestionCtrl"}}}).state("tab.question",{url:"/question",views:{"tab-admin":{templateUrl:"templates/question.html",controller:"QuestionCtrl"}}}),e.otherwise("/tab/adminLogin")}]),angular.module("dgmSurvey.controllers",[]),angular.module("dgmSurvey.services",[]),angular.module("loading",["ionic"]).factory("loading",["$ionicLoading",function(t){return{load:function(e){e=e||"Loading...",t.show({template:e})},unload:function(){t.hide()}}}]),angular.module("dgmSurvey.controllers").controller("adminDashCtrl",["$scope","$state",function(t,e){t.goCreate=function(){e.go("tab.question")},t.goView=function(){e.go("tab.adminViewQuestion")},t.goViewReports=function(){e.go("tab.adminReports")}}]),angular.module("dgmSurvey.controllers").controller("adminReportsCtrl",["$scope","questionService","loading",function(t,e,n){function o(t){var e={},n=function(t){e[t]=(e[t]||0)+1};angular.forEach(t,function(t){var e=t.value;r(e)?angular.forEach(e,n):n(e)});var o=[];return angular.forEach(e,function(t,e){o.push({label:e,value:t})}),o}function r(t){return"object"==typeof t&&null!=t.length}n.load(),e.getAllQuestions().then(function(e){t.questions=e.data.questions}).finally(n.unload),t.getAnswerData=function(n){var r=t.questions[n]._id;e.getQuestionAnswers(r).then(function(e){t.questions[n].answerData=o(e.data.answers),t.questions[n].answers=e.data.answers,t.questions[n].gotData=!0})}}]),angular.module("dgmSurvey.controllers").controller("loginCtrl",["$scope","loginService",function(t,e){t.signIn=function(t,n){var o={email:t,password:n};e.loginAdmin(o)}}]),angular.module("dgmSurvey.controllers").controller("QuestionCtrl",["$scope","questionService","$log",function(t,e,n){t.question={choices:[]};var o=e.getQuestionTypes();o.then(function(e){t.questionTypes=e.data.types},function(t){n.error("failed to load question types",t)}),t.addQuestion=function(t){console.log(t),e.postQuestion(t)},t.addAnswer=function(){t.question.choices.push("")};var r=e.getAllQuestions();r.then(function(e){t.questionViews=e.data.questions,console.log(t.questionViews)},function(t){n.error("failed to load questions",t)}),t.deleteQuestion=function(t){e.deleteAQuestionMethod(t)}}]),angular.module("dgmSurvey.services").factory("loginService",["$http","$state",function(t,e){return{loginAdmin:function(n){return t.post("/v1/auth/login",n).success(function(t,n){t.success===!0?(e.go("tab.adminDashboard"),console.log(t),console.log(n)):console.log(t.error)}).error(function(t){t.success===!1&&console.log(t.error)})}}}]),angular.module("dgmSurvey.services").factory("questionService",["$http","$state",function(t,e){return{getAllQuestions:function(){return t.get("/v1/question")},postQuestion:function(n){return t.post("/v1/question",n).success(function(t,n){t.success===!0&&(e.go("tab.adminDashboard"),console.log(t),console.log(n))}).error(function(t){t.success===!1&&console.log(t.error)})},getQuestionTypes:function(){return t.get("/v1/question/types")},deleteAQuestionMethod:function(n){return t.delete("/v1/question/"+n).success(function(t){t.success===!0&&e.go(e.current,{},{reload:!0})}).error(function(t){t.success===!1&&console.log(t.error)})},getQuestionAnswers:function(e){return t.get("/v1/question/"+e+"/answers")}}}]),angular.module("d3",[]).factory("d3",function(){return window.d3}).directive("pieChart",["d3","$window",function(t){return{restrict:"EA",scope:{values:"="},link:function(e,n){e.$watch("values",function(e){if(e){console.log(e);var o=300,r=o/2,a=t.scale.category20(),s=t.svg.arc().outerRadius(r-10).innerRadius(0),i=t.layout.pie().sort(null).value(function(t){return t.value});t.select(n[0]).selectAll("*").remove();var u=t.select(n[0]).append("svg").attr("width","100%").attr("height",o).append("g").attr("transform","translate("+r+","+r+")");e.forEach(function(t){t.value=+t.value});var l=u.selectAll(".arc").data(i(e)).enter().append("g").attr("class","arc");l.append("path").attr("d",s).style("fill",function(t,e){return a(e)}),l.append("text").attr("transform",function(t){return"translate("+s.centroid(t)+")"}).attr("dy",".35em").style("text-anchor","middle").text(function(t){return t.data.label+" ("+t.data.value+")"})}},!0)}}}]),angular.module("fastclick",[]).config(function(){window.FastClick&&FastClick.attach(document.body)}),angular.module("user",[]).factory("user",["$http",function(t){var e="/v1/user",n="/v1/auth",o=t.get(n+"/roles");return{create:function(n){var o=e;return t.post(o,n)},read:function(n){var o=e;return n&&(o+="/"+n),t.get(o)},update:function(n){var o=e+"/"+n.id;return t.put(o,n)},"delete":function(n){var o=e+"/"+n;return t.delete(o)},login:function(e,o){var r=n+"/login";return t.post(r,{email:e,password:o})},logout:function(){var e=n+"/logout";return t.post(e)},roles:o.then(function(t){return t.roles}),accessLevels:o.then(function(t){return t.accessLevels})}}]);
//# sourceMappingURL=../maps/app-0.0.0.min.js.map