angular.module("dgmSurvey",["ionic","d3","dgmSurvey.controllers","dgmSurvey.services"]).run(["$ionicPlatform",function(t){t.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("tab",{url:"/tab","abstract":!0,templateUrl:"templates/tabs.html"}).state("tab.adminLogin",{url:"/adminLogin",views:{"tab-admin":{templateUrl:"templates/tab-admin-login.html",controller:"loginCtrl"}}}).state("tab.adminDashboard",{url:"/adminDash",views:{"tab-admin":{templateUrl:"templates/admin-dashboard.html",controller:"adminDashCtrl"}}}).state("tab.adminReports",{url:"/adminReports",views:{"tab-admin":{templateUrl:"templates/admin-reports.html",controller:"adminReportsCtrl"}}}).state("tab.adminViewQuestion",{url:"/adminViewQuestion",views:{"tab-admin":{templateUrl:"templates/admin-view-question.html",controller:"QuestionCtrl"}}}).state("tab.question",{url:"/question",views:{"tab-admin":{templateUrl:"templates/question.html",controller:"QuestionCtrl"}}}),e.otherwise("/tab/adminLogin")}]),angular.module("dgmSurvey.controllers",[]),angular.module("dgmSurvey.services",[]),angular.module("dgmSurvey.controllers").controller("adminDashCtrl",["$scope","$state",function(t,e){t.goCreate=function(){e.go("tab.question")},t.goView=function(){e.go("tab.adminViewQuestion")},t.goViewReports=function(){e.go("tab.adminReports")}}]),angular.module("dgmSurvey.controllers").controller("adminReportsCtrl",["$scope",function(){}]),angular.module("dgmSurvey.controllers").controller("loginCtrl",["$scope","loginService",function(t,e){t.signIn=function(t,n){var o={email:t,password:n};e.loginAdmin(o)}}]),angular.module("dgmSurvey.controllers").controller("QuestionCtrl",["$scope","questionService","$log",function(t,e,n){t.question={choices:[]};var o=e.getQuestionTypes();o.then(function(e){t.questionTypes=e.data.types},function(t){n.error("failed to load question types",t)}),t.addQuestion=function(t){console.log(t),e.postQuestion(t)},t.addAnswer=function(){t.question.choices.push("")};var r=e.getAllQuestions();r.then(function(e){t.questionViews=e.data.questions,console.log(t.questionViews)},function(t){n.error("failed to load questions",t)}),t.deleteQuestion=function(t){e.deleteAQuestionMethod(t)}}]),angular.module("dgmSurvey.services").factory("loginService",["$http","$state",function(t,e){return{loginAdmin:function(n){return t.post("/v1/auth/login",n).success(function(t,n){t.success===!0?(e.go("tab.adminDashboard"),console.log(t),console.log(n)):console.log(t.error)}).error(function(t){t.success===!1&&console.log(t.error)})}}}]),angular.module("dgmSurvey.services").factory("questionService",["$http","$state",function(t,e){return{getAllQuestions:function(){return t.get("/v1/question")},postQuestion:function(n){return t.post("/v1/question",n).success(function(t,n){t.success===!0&&(e.go("tab.adminDashboard"),console.log(t),console.log(n))}).error(function(t){t.success===!1&&console.log(t.error)})},getQuestionTypes:function(){return t.get("/v1/question/types")},deleteAQuestionMethod:function(n){return t.delete("/v1/question/"+n).success(function(t){t.success===!0&&e.go(e.current,{},{reload:!0})}).error(function(t){t.success===!1&&console.log(t.error)})}}}]),angular.module("d3",[]).factory("d3",function(){return window.d3}).directive("pieChart",["d3","$window",function(t,e){return{restrict:"EA",scope:{data:"="},link:function(n,o,r){var i=t.select(o[0]).append("svg").style("width","100%"),a=parseInt(r.margin)||20,s=parseInt(r.barHeight)||20,u=parseInt(r.barPadding)||5,l=window.onresize;window.onresize=function(){l(),n.$apply()},n.$watch(function(){return angular.element(e)[0].innerWidth},function(){n.render(n.data)}),n.render=function(e){if(i.selectAll("*").remove(),e){var r=t.select(o[0]).node().offsetWidth-a,l=n.data.length*(s+u),c=t.scale.category20(),d=t.scale.linear().domain([0,t.max(e,function(t){return t.score})]).range([0,r]);i.attr("height",l),i.selectAll("rect").data(e).enter().append("rect").attr("height",s).attr("width",140).attr("x",Math.round(a/2)).attr("y",function(t,e){return e*(s+u)}).attr("fill",function(t){return c(t.score)}).transition().duration(1e3).attr("width",function(t){return d(t.score)})}}}}}]),angular.module("fastclick",[]).config(function(){window.FastClick&&FastClick.attach(document.body)}),angular.module("user",[]).factory("user",["$http",function(t){var e="/v1/user",n="/v1/auth",o=t.get(n+"/roles");return{create:function(n){var o=e;return t.post(o,n)},read:function(n){var o=e;return n&&(o+="/"+n),t.get(o)},update:function(n){var o=e+"/"+n.id;return t.put(o,n)},"delete":function(n){var o=e+"/"+n;return t.delete(o)},login:function(e,o){var r=n+"/login";return t.post(r,{email:e,password:o})},logout:function(){var e=n+"/logout";return t.post(e)},roles:o.then(function(t){return t.roles}),accessLevels:o.then(function(t){return t.accessLevels})}}]);
//# sourceMappingURL=../maps/app-0.0.0.min.js.map