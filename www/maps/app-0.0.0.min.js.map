{"version":3,"sources":["app/app.js","app/controllers/admin-dashboard-controller.js","app/controllers/admin-reports.js","app/controllers/login-controller.js","app/controllers/question-controller.js","app/services/login-service.js","app/services/question-service.js","modules/d3/d3.js","modules/fastclick/fastclick.js","modules/user/user.js"],"names":[],"mappings":"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","file":"app-0.0.0.min.js","sourcesContent":["angular.module('dgmSurvey', [\n  'ionic',\n  'd3',\n  'dgmSurvey.controllers',\n  'dgmSurvey.services'\n])\n    .run(function ($ionicPlatform) {\n        $ionicPlatform.ready(function () {\n            // Hide the accessory bar by default (remove this to show the accessory bar\n            // above the keyboard for form inputs)\n            if (window.cordova && window.cordova.plugins.Keyboard) {\n                cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\n            }\n            if (window.StatusBar) {\n                // org.apache.cordova.statusbar required\n                StatusBar.styleDefault();\n            }\n        });\n    })\n    .config(function ($stateProvider, $urlRouterProvider) {\n\n        // Ionic uses AngularUI Router which uses the concept of states\n        // Learn more here: https://github.com/angular-ui/ui-router\n        // Set up the various states which the app can be in.\n        // Each state's controller can be found in controllers.js\n        $stateProvider\n        // setup an abstract state for the tabs directive\n        .state('tab', {\n            url: '/tab',\n            abstract: true,\n            templateUrl: 'templates/tabs.html'\n        })\n            .state('tab.adminLogin', {\n                url: '/adminLogin',\n                views: {\n                    'tab-admin': {\n                        templateUrl: 'templates/tab-admin-login.html',\n                        controller: 'loginCtrl'\n                    }\n                }\n            })\n            .state('tab.adminDashboard', {\n                url: '/adminDash',\n                views: {\n                    'tab-admin': {\n                        templateUrl: 'templates/admin-dashboard.html',\n                        controller: 'adminDashCtrl'\n                    }\n                }\n            })\n            .state('tab.adminReports', {\n                url: '/adminReports',\n                views: {\n                    'tab-admin': {\n                       templateUrl: 'templates/admin-reports.html',\n                       controller: 'adminReportsCtrl'\n                    }\n                }\n            })\n            .state('tab.adminViewQuestion', {\n                url: '/adminViewQuestion',\n                views: {\n                    'tab-admin': {\n                        templateUrl: 'templates/admin-view-question.html',\n                        controller: 'QuestionCtrl'\n                    }\n                }\n            })\n            .state('tab.question', {\n                url: '/question',\n                views: {\n                    'tab-admin': {\n                        templateUrl: 'templates/question.html',\n                        controller: 'QuestionCtrl'\n                    }\n                }\n            });\n        // if none of the above states are matched, use this as the fallback\n        $urlRouterProvider.otherwise('/tab/adminLogin');\n\n    });\n\nangular.module('dgmSurvey.controllers', []);\nangular.module('dgmSurvey.services', []);\n","angular.module('dgmSurvey.controllers')\n    .controller('adminDashCtrl', function ($scope, $state) {\n\n        $scope.goCreate = function () {\n            $state.go('tab.question');\n        };\n        $scope.goView = function () {\n            $state.go('tab.adminViewQuestion');\n        };\n        $scope.goViewReports = function () {\n            $state.go('tab.adminReports');\n        };\n    });\n","angular.module('dgmSurvey.controllers')\n.controller('adminReportsCtrl', function ($scope) {\n\n});\n","angular.module('dgmSurvey.controllers')\n    .controller('loginCtrl', function ($scope, loginService) {\n\n        $scope.signIn = function (id, pass) {\n            var data = {\n                \"email\": id,\n                \"password\": pass\n            };\n\n            loginService.loginAdmin(data);\n\n        }\n    });\n","angular.module('dgmSurvey.controllers')\n    .controller('QuestionCtrl', function ($scope, questionService, $log) {\n        $scope.question = {\n            choices: []\n        };\n\n        var questionTypePromise = questionService.getQuestionTypes();\n        questionTypePromise.then(\n            function (payload) {\n                $scope.questionTypes = payload.data.types;\n            },\n            function (errorPayload) {\n                $log.error('failed to load question types', errorPayload);\n            });\n        $scope.addQuestion = function (question) {\n            //            console.log(arguments);\n            //            var questionData = {\n            //                \"label\": \"New Label\",\n            //                \"question\": question,\n            //                \"type\": type,\n            //                \"choices\": [{\n            //                    \"label\": choices,\n            //                    \"key\": \"answerKey\"\n            //                }]\n            //            }\n            //            console.log(questionData);\n            console.log(question);\n            questionService.postQuestion(question);\n        };\n        $scope.addAnswer = function () {\n            $scope.question.choices.push('');\n        };\n        var questionPromise = questionService.getAllQuestions();\n        questionPromise.then(\n            function (payload) {\n                $scope.questionViews = payload.data.questions;\n                console.log($scope.questionViews);\n            },\n            function (errorPayload) {\n                $log.error('failed to load questions', errorPayload);\n            });\n\n        $scope.deleteQuestion = function (id) {\n            questionService.deleteAQuestionMethod(id);\n        };\n\n    });\n","angular.module('dgmSurvey.services')\n    .factory('loginService', function ($http, $state) {\n        return {\n            loginAdmin: function (data) {\n                return $http.post('/v1/auth/login', data)\n                    .success(function (data, headers) {\n                        if (data.success === true) {\n                            $state.go('tab.adminDashboard');\n                            console.log(data);\n                            console.log(headers);\n                        } else {\n                            console.log(data.error);\n                        }\n                    })\n                    .error(function (data, headers) {\n                        if (data.success === false) {\n                            console.log(data.error);\n                        }\n                    });\n            }\n        };\n    });\n","angular.module('dgmSurvey.services')\n    .factory('questionService', function ($http, $state) {\n        return {\n            getAllQuestions: function () {\n                return $http.get('/v1/question');\n            },\n            postQuestion: function (question) {\n                return $http.post('/v1/question', question)\n                    .success(function (data, headers) {\n                        if (data.success === true) {\n                            $state.go('tab.adminDashboard');\n                            console.log(data);\n                            console.log(headers);\n                        }\n                    })\n                    .error(function (data, headers) {\n                        if (data.success === false) {\n                            console.log(data.error);\n                        }\n                    });\n            },\n            getQuestionTypes: function () {\n                return $http.get('/v1/question/types');\n            },\n            deleteAQuestionMethod: function (id) {\n                return $http.delete('/v1/question/' + id)\n                    .success(function (data, headers) {\n                        if (data.success === true) {\n                            $state.go($state.current, {}, {\n                                reload: true\n                            });\n                        }\n                    })\n                    .error(function (data, headers) {\n                        if (data.success === false) {\n                            console.log(data.error);\n                        }\n                    });\n\n            }\n        };\n    });\n","angular.module('d3', [])\n.factory('d3', function () {\n  return window.d3;\n})\n.directive('pieChart', function (d3, $window) {\n  return {\n    restrict: 'EA',\n    scope: {\n      data: '='\n    },\n    link: function (scope, elem, attrs) {\n      var svg = d3.select(elem[0])\n        .append('svg')\n        .style('width', '100%');\n\n      var margin     = parseInt(attrs.margin) || 20;\n      var barHeight  = parseInt(attrs.barHeight) || 20;\n      var barPadding = parseInt(attrs.barPadding) || 5;\n\n      var prevResize = window.onresize;\n      window.onresize = function () {\n        prevResize();\n        scope.$apply();\n      };\n\n      scope.$watch(function() {\n        return angular.element($window)[0].innerWidth;\n      }, function() {\n        scope.render(scope.data);\n      });\n\n      scope.render = function (data) {\n        // remove all previous items before render\n        svg.selectAll('*').remove();\n\n        // If we don't pass any data, return out of the element\n        if (!data) { return };\n\n        // setup variables\n        var width = d3.select(elem[0]).node().offsetWidth - margin;\n        // calculate the height\n        var height = scope.data.length * (barHeight + barPadding);\n        // Use the category20() scale function for multicolor support\n        var color = d3.scale.category20();\n        // our xScale\n        var xScale = d3.scale.linear()\n          .domain([0, d3.max(data, function(d) {\n            return d.score;\n          })])\n          .range([0, width]);\n\n        // set the height based on the calculations above\n        svg.attr('height', height);\n\n        //create the rectangles for the bar chart\n        svg.selectAll('rect')\n          .data(data).enter()\n          .append('rect')\n          .attr('height', barHeight)\n          .attr('width', 140)\n          .attr('x', Math.round(margin/2))\n          .attr('y', function(d,i) {\n            return i * (barHeight + barPadding);\n          })\n          .attr('fill', function(d) { return color(d.score); })\n          .transition()\n          .duration(1000)\n          .attr('width', function(d) {\n            return xScale(d.score);\n          });\n      };\n    }\n  };\n});\n","/* global angular, FastClick */\nangular.module('fastclick', [])\n.config(function () {\n  if (!window.FastClick) { return; }\n  FastClick.attach(document.body);\n});\n","angular.module('user', [])\n.factory('user', function ($http) {\n  var baseUser = '/v1/user';\n  var baseAuth = '/v1/auth';\n\n  var roleData = $http.get(baseAuth + '/roles');\n\n  return {\n    create: function (data) {\n      var url = baseUser;\n      return $http.post(url, data);\n    },\n    read: function (id) {\n      var url = baseUser;\n      if (id) { url += '/' + id; }\n      return $http.get(url);\n    },\n    update: function (user) {\n      var url = baseUser + '/' + user.id;\n      return $http.put(url, user);\n    },\n    delete: function (id) {\n      var url = baseUser + '/' + id;\n      return $http.delete(url);\n    },\n    login: function (email, password) {\n      var url = baseAuth + '/login';\n      return $http.post(url, {\n        email: email,\n        password: password\n      });\n    },\n    logout: function () {\n      var url = baseAuth + '/logout';\n      return $http.post(url);\n    },\n    roles: roleData.then(function (data) {\n      return data.roles;\n    }),\n    accessLevels: roleData.then(function (data) {\n      return data.accessLevels;\n    })\n  };\n});\n"],"sourceRoot":"/source/"}